DELIMITER $$

CREATE TRIGGER after_stock_update
AFTER UPDATE
ON products FOR EACH ROW
BEGIN
    IF (NEW.stock = 0) THEN
      UPDATE products SET status='unavailable' WHERE id=OLD.id;
    ELSE IF (NEW.stock > 0) THEN
      UPDATE products SET status='available' WHERE id=OLD.id;
    END IF;
  END IF;
END$$

DELIMITER ;